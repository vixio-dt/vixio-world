---
description: MANDATORY FIRST STEP - Query MCP specialists BEFORE any implementation
alwaysApply: true
---

# MCP-First: Query Before You Code

**This is STEP ONE of any implementation. Do this BEFORE confidence checks, brainstorming, or planning.**

## The Rule

```
┌─────────────────────────────────────────────────────────────┐
│  BEFORE WRITING ANY CODE, YOU MUST:                         │
│                                                             │
│  1. IDENTIFY which MCPs are relevant to this task           │
│  2. CALL those MCPs and get current information             │
│  3. SHOW what you learned before proceeding                 │
│                                                             │
│  This is NOT optional. This is NOT "if needed".             │
│  This is ALWAYS for implementation tasks.                   │
└─────────────────────────────────────────────────────────────┘
```

## MCP Action Table (Core MCPs - Always Available)

| Task Type | MCP to CALL | Specific Tool |
|-----------|-------------|---------------|
| Using ANY library | **Context7** | `resolve-library-id` → `query-docs` |
| Complex decisions (2+ options) | **Sequential Thinking** | `sequentialthinking` |
| Next.js code | **next-devtools** | `nextjs_index` → `nextjs_call` |
| Fixing lint errors | **eslint** | `lint-files` |
| UI verification | **Playwright** | Browser automation |
| Persist decisions | **Memory** | `create_entities` / `search_nodes` |
| Web content | **Fetch** | `fetch` |

## Optional MCPs (Enable in Cursor Settings When Needed)

These are disabled by default to stay under the 80-tool limit:

| Task Type | MCP | Enable When |
|-----------|-----|-------------|
| Database work | **Supabase** | Schema changes, RLS policies |
| Production bugs | **Sentry** | Debugging prod errors |
| GitHub operations | **GitHub** | Complex PR workflows |
| Data visualization | **AntVis Chart** | Generating charts for export |
| Tailwind styling | **tailwindcss** | Heavy Tailwind work (fix error first) |

## Minimum MCP Set

For ANY implementation task, query at minimum:

1. **Context7** - For every library you'll touch (Mantine, React, Motion, etc.)
2. **Sequential Thinking** - If there are multiple approaches or the task is complex

## Required Output Format

Before implementing, show this summary:

```
MCP Queries Complete:
• Context7 (@mantine/core): createTheme() with custom colors, MantineProvider setup
• Sequential Thinking: Structured 4 decisions - theme first, then migration
• [Other MCPs if used]

Proceeding with implementation...
```

## Why MCPs Beat Working Alone

| Without MCP | With MCP |
|-------------|----------|
| Guess at API syntax | Get current docs for your exact version |
| Hope schema is correct | Query actual database structure |
| Miss runtime errors | See real Next.js dev server state |
| Inconsistent styling | Get correct Tailwind utilities |
| Ad-hoc problem solving | Structured reasoning with audit trail |

## Exceptions (rare)

Skip MCP ONLY when:
1. Trivial edits (typos, comments, formatting)
2. MCP is unavailable/erroring after retry
3. User explicitly says "skip MCP"

**Default behavior: ALWAYS query MCPs first.**
